var dwm=webpackJsonpdwm([1],{16:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.Cookie=0]="Cookie",e[e.Local=1]="Local",e[e.Session=2]="Session"}(t.StorageType||(t.StorageType={}))},26:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(16),o=n(68),a=function(){function e(){}return e.getStorage=function(e){void 0===e&&(e=r.StorageType.Local);var t=null;switch(e){case r.StorageType.Local:default:t=new o.default}return t},e}();t.default=a},34:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(0),a=n(4),s=n(65),i="pushState"in window.history;o.render(r.createElement(a.BrowserRouter,{forceRefresh:!i},r.createElement(s.default,null)),document.getElementById("app-root"))},65:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(4),s=n(66),i=n(69),c=n(77),u=n(78),l=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.render=function(){return o.createElement("div",{id:"app-context"},o.createElement("div",{className:"ui grid"},o.createElement(i.default,null,o.createElement(s.default,{path:"/",exact:!0,component:c.default}),o.createElement(a.Route,{path:"/login",exact:!0,component:u.default}))))},t}(o.Component);t.default=l},66:function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},o=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]]);return n};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(4),i=n(67),c=function(e){var t=e.component,n=o(e,["component"]);return a.createElement(s.Route,r({},n,{render:function(e){return i.default.isAuthenticated()?a.createElement(t,r({},e)):a.createElement(s.Redirect,{to:{pathname:"/login",state:{from:e.location}}})}}))};t.default=c},67:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(26),o=n(16),a={isAuthenticated:function(){return null!==r.default.getStorage(o.StorageType.Local).get("token")}};t.default=a},68:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.storage=localStorage}return e.prototype.set=function(e,t){this.storage.setItem(e,t)},e.prototype.get=function(e){return this.storage.getItem(e)},e.prototype.remove=function(e){this.storage.removeItem(e)},e.prototype.clear=function(){this.storage.clear()},e}();t.default=r},69:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(4),s=n(70),i=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.render=function(){var e=this;return o.createElement(a.Route,{path:"/",render:function(t){return o.createElement(s.CSSTransition,{classNames:"fade",timeout:500},o.createElement("div",{className:"route-context"},e.props.children))}})},t}(o.Component);t.default=i},77:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(4),s=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.render=function(){return o.createElement("div",null,o.createElement("p",null,"Home"),o.createElement(a.Link,{to:"/login"},"Login"))},t}(o.Component);t.default=s},78:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o,a=n(0),s=n(26),i=n(16),c=n(79);!function(e){e[e.NoServer=0]="NoServer",e[e.LoginNotFound=100]="LoginNotFound",e[e.WrongLoginOrPass=200]="WrongLoginOrPass",e[e.MissingLogin=300]="MissingLogin",e[e.MissingPass=400]="MissingPass",e[e.AlreadyLoggedIn=500]="AlreadyLoggedIn"}(o||(o={}));var u=function(e){function t(t){var n=e.call(this,t)||this;n.Storage=s.default.getStorage(i.StorageType.Local);var r=n.Storage.get("token");return n.Service=new c.default({name:"login",baseUrl:"http://localhost:5000",headers:null!==r?{Authorization:"Bearer "+r}:null}),n.state={login:"",passwd:"",hasError:!1,errorText:""},n.authenticate=n.authenticate.bind(n),n.inputChange=n.inputChange.bind(n),n}return r(t,e),t.prototype.authenticate=function(e){var t=this;e.preventDefault(),this.Service.post({responseType:"plain",body:"login="+this.state.login+"&passwd="+this.state.passwd}).toPromise().then(function(e){t.Storage.set("token",e),t.props.history.push(t.props.location.state.from)}).catch(function(e){if(e.status>0){var n=JSON.parse(e.xhr.response);500===n.LoginCode?t.props.history.push(t.props.location.state?t.props.location.state.from:"/"):t.setError(n.Message)}else t.setError("Could not contact server!");console.error(e)})},t.prototype.setError=function(e){this.setState({hasError:!0,errorText:e})},t.prototype.inputChange=function(e){this.setState((t={},t[e.nativeEvent.target.name]=e.nativeEvent.target.value,t));var t},t.prototype.render=function(){return a.createElement("div",{className:"middle aligned center"},a.createElement("div",{className:"column"},a.createElement("h2",{className:"ui teal header"},"Drive With Me"),a.createElement("form",{className:"ui large form"},a.createElement("div",{className:"ui stacked segment"},a.createElement("div",{className:"field"},a.createElement("div",{className:"ui left icon input"},a.createElement("i",{className:"user icon"}),a.createElement("input",{type:"text",id:"login",name:"login",placeholder:"User",value:this.state.login,onChange:this.inputChange}))),a.createElement("div",{className:"field"},a.createElement("div",{className:"ui left icon input"},a.createElement("i",{className:"lock icon"}),a.createElement("input",{type:"password",id:"passwd",name:"passwd",placeholder:"Password",value:this.state.passwd,onChange:this.inputChange}))),a.createElement("div",{className:"ui fluid large teal submit button"},"Login")),a.createElement("div",{className:"ui error message"})),a.createElement("div",{className:"ui message"})))},t}(a.Component);t.default=u},79:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7);n(87),n(90),n(91);var o=function(){function e(e){this.Request={url:(e.baseUrl||location.origin)+"/"+e.name,async:!0,headers:e.headers,hasContent:!1,crossDomain:!1,responseType:"json"}}return e.prototype.setRequest=function(e){(e.user||e.password)&&(e.withCredentials=!0),e.body&&(e.hasContent=!0)},e.prototype.get=function(e){var t=Object.assign(this.Request,{method:"GET"});return this.setRequest(t),r.Observable.ajax(Object.assign(t,e)).map(function(e,t){return e.response})},e.prototype.post=function(e){var t=Object.assign(this.Request,{method:"POST"});return this.setRequest(t),r.Observable.ajax(Object.assign(t,e)).map(function(e,t){return e.response})},e}();t.default=o}},[34]);